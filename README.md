# 恶意文件清理卫士

[![License: GPL v3](https://img.shields.io/badge/License-GPLv3-blue.svg)](https://www.gnu.org/licenses/gpl-3.0)

## 模块简介

### 恶意文件清理卫士是一个专为 Android 系统设计的安全防护模块，主要用于针对 zygisk.apk 及其变种木马程序。

## 功能特性

### 核心防护功能

· 开机自动清理：在系统启动时自动运行清理程序
· 多重恶意文件检测：支持检测以下恶意文件：
  · zygisk.apk
  · termex.apk
  · [0-3].sh
  · 2sh
· 路径监控：监控 /data/adb/ 目录下的可疑文件
· 实时防护：持续运行的后台守护进程

### 增强安全特性

· 双守护机制：确保清理进程持续运行
· 防杀保护：防止恶意程序终止防护进程
· 自动恢复：进程异常退出时自动重启

### 安装要求

· 系统要求：Android 系统（需要 Root 权限）
· 环境要求：支持 Zygisk 的 Magisk 环境
· 存储权限：需要访问 /data/ 目录的权限

### 安装方法

1. 下载模块 ZIP 文件
2. 在 Magisk Manager 中刷入模块
3. 重启设备
4. 模块将自动开始工作

## 文件清理目标

### 主要清理目标

```
/data/adb/ 目录下的：
- zygisk.apk
- termex.apk  
- [0-3].sh
- 2sh
```

### 新增清理路径

```
/data/local/vendor
/data/misc/adb
```

## 特殊目录清理

· 所有模块目录中的 priv-app 文件夹

## 日志查看

模块运行日志保存在：

```
/data/adb/modules/MalwareCleanupGuard_EnhancedVersion/module_log.md
```

日志文件采用实时更新方式，最新日志显示在文件末尾。

## 技术细节

### 进程守护机制

```bash
# 主工作进程
worker_loop() - 负责实际的文件清理工作

# 看门狗进程  
watchdog_loop() - 监控工作进程状态，确保持续运行
```

## 防护策略

· 循环检测：每1秒执行一次文件扫描
· 进程守护：每30秒检查一次进程状态
· 防重复运行：使用锁文件机制防止重复启动

## 特别安全提醒

### 新型威胁预警

根据最新发现，zygisk.apk 出现了新的变异版本：

变异特征：

· 文件名改为：termex.apk
· 包名伪装为：bin.mt.plus.termex（MT终端扩展包）
· 路径改为：/data/misc/adb/

## 手动检测方法

### 如果怀疑设备感染，建议进行以下检查：

1. 搜索所有APK文件：
   ```bash
   find /data/adb/ -name ".apk"
   ```
2. 检查文件内容：
   对可疑的APK文件进行拆包分析，检查是否包含这个网址：fdkss.sbs

## 注意事项

### 重要警告

· 刷入前请备份数据：为防止意外情况，建议在安装前完整备份手机数据
· 系统兼容性：本模块主要针对特定恶意文件，可能与其他模块存在冲突
· 性能影响：持续的文件监控可能对系统性能产生轻微影响

## 故障排除

### 如果模块运行异常：

1. 检查日志文件：/data/adb/modules/MalwareCleanupGuard/module_log.md
2. 确认 Magisk 和 Zygisk 正常工作
3. 尝试重启设备
4. 如问题持续，可暂时禁用模块进行排查

## 版本信息

· 模块ID：MalwareCleanupGuard
· 当前版本：v1.1.0.20251103_release
· 版本代码：110
· 开发者：HaiMing
· 网站：https://link3.cc/haiming

## 更新日志

### v1.0.0.20251102_release

· 初代版本，不做日志

### v1.1.0.20251103_release

· 新增对 /data/local/vendor 和 /data/misc/adb 路径的清理
· 优化进程守护机制
· 增强对新型变异版本的检测能力

## 技术支持

### 如遇到问题或有建议，可通过以下方式联系：

· 访问开发者网站：https://link3.cc/haiming
· 查看模块文档和更新信息

## 免责声明

### 本模块旨在提供安全防护功能，但无法保证100%防护所有威胁。用户应保持警惕，定期检查系统安全状态，并配合其他安全措施共同防护。

## 版权与许可证

本项目基于 GNU通用公共许可证v3.0 (GPL-3.0) 开源。

## 核心条款

### 您享有以下权利：

· ✅ 商业使用 - 允许在商业环境中使用和盈利
· ✅ 修改衍生 - 可以修改代码并创建衍生作品
· ✅ 自由分发 - 可以重新分发原始或修改后的版本
· ✅ 私人使用 - 无限制的私人使用和研究

### 需要遵守的条件：

· 📄 署名要求 - 必须保留原始版权声明和许可证信息
· 🔄 修改声明 - 对代码的修改必须明确标识并说明
· 🔗 相同许可 - 衍生作品必须采用相同的GPL v3许可证
· 📱 源码公开 - 分发衍生作品时必须公开源代码

### 重要说明

· 本项目不提供任何担保，使用者承担所有风险
· 作者不对因使用本项目而产生的任何损害负责
· 任何使用、修改或分发行为均视为接受GPL v3许可证条款

完整的法律条款请参阅 LICENSE 文件。

## 法律责任

任何违反上述条款的行为都将被视为侵权，作者保留追究法律责任的权利。

### ©本版权声明最终解释权归项目作者所有
